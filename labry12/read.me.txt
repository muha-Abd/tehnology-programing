1. Инициализация приложения

После загрузки страницы выполняется проверка:

if (localStorage.getItem("token")) {
    renderDashboard();
} else {
    renderLogin();
}

То есть:

если токен уже есть в localStorage — пользователь автоматически считается авторизованным;

если токена нет — показывается форма входа.



---

2. Форма входа

Функция renderLogin() выводит HTML-разметку формы:

поле Email

поле Пароль

кнопка «Войти»


Когда пользователь нажимает кнопку, выполняется обработчик:

document.getElementById("loginBtn").onclick = () => {


---

3. Генерация фейкового JWT-токена

После ввода email и пароля создаётся токен:

const token = generateFakeJWT(email);

Функция generateFakeJWT() возвращает строку, закодированную через btoa():

return btoa(JSON.stringify({ email: email, time: Date.now() }));

То есть в токене хранится:

email пользователя

время входа
(в реальном JWT хранится больше данных)


Токен сохраняется в localStorage:

localStorage.setItem("token", token);


---

4. Отображение личного кабинета (Dashboard)

Если пользователь авторизован, появляется экран:

<h2>Добро пожаловать, email</h2>
<button id="logoutBtn">Выход</button>

Чтобы получить email, код декодирует токен:

const data = JSON.parse(atob(token));

Теперь мы можем использовать данные, сохранённые внутри токена.


---

5. Выход пользователя

При нажатии кнопки «Выход»:

localStorage.removeItem("token");
renderLogin();

То есть:

токен удаляется;

пользователь возвращается на форму входа.



---

6. Автоматический вход при обновлении страницы

Так как токен хранится в браузере, то после F5:

if (localStorage.getItem("token"))

пользователь попадает сразу в личный кабинет без ввода пароля.
Это называется persistent authentication (постоянная авторизация).